(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{508:function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"default",(function(){return p}));o(237);var n=o(79),r=o(779),i=o.n(r),c=o(798),s=o.n(c);o(799);function a(e,t,o,n,r,i,c){try{var s=e[i](c),a=s.value}catch(e){return void o(e)}s.done?t(a):Promise.resolve(a).then(n,r)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(t){var o,n;function r(){var e;return(e=t.call(this)||this).checkoutState=null,e.orderCommentsSelector='.optimizedCheckout-form-input[name="orderComment"]',e.shippingMethodPreselected=!1,e}n=t,(o=r).prototype=Object.create(n.prototype),o.prototype.constructor=o,u(o,n);var c=r.prototype;return c.getCachedCheckoutState=function(){console.log("Getting Cached Delivery Options");var e=window.localStorage.getItem("ob-shipping");return e&&(this.checkoutState=JSON.parse(e),console.log("Checkout State Set:",this.checkoutState)),!!this.checkoutState||(console.error("[Warning]: Pickup/Delivery Customization not properly persisting data for this customer."),!1)},c.generateShippingString=function(e){var t=e.shippingMethod,o=e.date,n=e.time,r=e.pickupLocationFull;return t+" "+(r?" | Store: "+r+" | ":"")+" Day: "+o+(n?" | Time: "+n:"")},c.onReady=function(){e("[data-cart-preview]").on("click",(function(e){return window.location.href="/cart.php"}));var t=this.getCachedCheckoutState();if(t){if(t&&"Shipping"==this.checkoutState.shippingMethod)return console.log("Shipping-Colorodo: Default Checkout Flow."),void window.listenForMutations('[data-test="checkout-shipping-comments"]',(function(t){e(t).find("input").val(""),s()(t),e(t).addClass("ob-hidden")}));var o=this;window.listenForMutations("#checkout-app",function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r,c,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("/api/storefront/carts/");case 2:if(r=t.sent,o.checkoutID=r.data[0].id,!o.checkoutState){t.next=15;break}return c=o.generateShippingString(o.checkoutState),a="/api/storefront/checkouts/"+o.checkoutID,t.next=9,i.a.put(a,{customerMessage:c});case 9:e(o.orderCommentsSelector).val(c),u=document.querySelector(o.orderCommentsSelector),window.localStorage.setItem("orderComment",c),s()(u),e('.checkout-step.optimizedCheckout-checkoutStep.checkout-step--shipping .stepHeader [data-test="step-edit-button"]').click();case 15:case"end":return t.stop()}}),t)})),function(){var e=this,o=arguments;return new Promise((function(n,r){var i=t.apply(e,o);function c(e){a(i,n,r,c,s,"next",e)}function s(e){a(i,n,r,c,s,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}()),window.listenForMutations("#checkoutShippingAddress",(function(t){e("#sameAsBilling").parent(".form-field").addClass("ob-hidden"),e(o.orderCommentsSelector).attr("readonly",!0),o.shippingMethodPreselected=!1})),window.listenForMutations("#checkout-shipping-options .shippingOptions-container",(function(t){if(!e(".dropdownMenu").length){var n=o.checkoutState.shippingMethod;"Pickup"!==n&&(n="Delivery");var r=e('span.shippingOption-desc:contains("'+n+'")');if(r.length){var c=r.parents(".shippingOptions-container .form-field");e(".shippingOptions-container .form-field").not(c).parents(".form-checklist-item").addClass("ob-hidden"),o.shippingMethodPreselected||setTimeout((function(){r.parents(".form-label.optimizedCheckout-form-label").click(),o.shippingMethodPreselected=!0}),1e3);var a=o.generateShippingString(o.checkoutState);e(o.orderCommentsSelector).val(a);var u=document.querySelector(o.orderCommentsSelector);window.localStorage.setItem("orderComment",a),s()(u);var p="/api/storefront/checkouts/"+o.checkoutID;i.a.put(p,{customerMessage:a})}else console.log("Shipping Option Names are not configured correctly - must be 'Pickup' or 'Delivery'")}}),!0)}else console.error("Checkout state improperly configured..")},r}(n.a)}.call(this,o(2))},799:function(e,t,o){"use strict";console.log("Exposing Mutation listener");!function(e){var t,o=[],n=e.document,r=e.MutationObserver||e.WebKitMutationObserver;function i(){for(var e,t,r=0,i=o.length;r<i;r++){e=o[r];for(var c,s=0,a=(t=n.querySelectorAll(e.selector)).length;s<a;s++)(c=t[s]).ready||(e.runAllMutations||(c.ready=!0),e.fn.call(c,c))}}console.log("Exposing Ready Function"),e.listenForMutations=function(e,c,s){o.push({selector:e,fn:c,runAllMutations:s}),t||(t=new r(i)).observe(n.documentElement,{childList:!0,subtree:!0}),i()}}(window)}}]);
//# sourceMappingURL=theme-bundle.chunk.16.js.map